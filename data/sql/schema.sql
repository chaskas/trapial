CREATE TABLE trapial_comments (id BIGINT AUTO_INCREMENT, comment_post_id bigint(20) NOT NULL UNIQUE, comment_author tinytext NOT NULL, comment_author_email VARCHAR(100) DEFAULT ' ' NOT NULL, comment_author_ip VARCHAR(100) DEFAULT ' ' NOT NULL, comment_content text NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX comment_post_id_idx (comment_post_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE trapial_posts (id BIGINT AUTO_INCREMENT, post_author bigint(20) NOT NULL UNIQUE, post_content longtext NOT NULL, post_title text NOT NULL, comment_count bigint(20) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE trapial_comments ADD CONSTRAINT trapial_comments_comment_post_id_trapial_posts_id FOREIGN KEY (comment_post_id) REFERENCES trapial_posts(id) ON DELETE CASCADE;
